#№ Отчет по лабораторной работе №2
## по курсу "Логическое программирование"

## Решение логических задач

### студент: Королев И.М.

## Результат проверки

| Преподаватель     | Дата         |  Оценка       |
|-------------------|--------------|---------------|
| Сошников Д.В. |              |               |
| Левинская М.А.|              |      5        |

> *Комментарии проверяющих (обратите внимание, что более подробные комментарии возможны непосредственно в репозитории по тексту программы)*


## Введение

Существует два подхода к решению логических задач. Первый подход генерирует определённое множество, которое определяется исходными данными, а потом эти данные проверяются другими предикатами на соответствие условию задачи. Второй способ отсекает возможные варианты, не удовлетворяющие условию. Эти варианты могут отсекаться на раннем этапе, что упрощает поиск нужного решения. Также оба этих метода основываются на переборе решений. Для решения задачи лабораторной работы был выбран второй вариант. Отсечение неверных вариантов выполнялось с помощью предиката ```member```.

Пролог является удобным языком для решения логических задач, потому он позволяет задавать правила, благодаря которым он может  находить решения, удовлетворяющие условию из большого множества всех возможных.

## Задание

14. В педагогическом институте Аркадьева, Бабанова, Корсакова, Дашков, Ильин и Флеров преподают географию, английский язык, французский язык, немецкий язык, историю и математику. Преподаватель немецкого языка и преподаватель математики в студенческие годы занимались художественной гимнастикой. Ильин старше Флерова, но стаж работы у него меньше, чем у преподавателя географии. Будучи студентками, Аркадьева и Бабанова учились вместе в одном университете. Все остальные окончили педагогический институт. Флеров отец преподавателя французского языка. Преподаватель английского языка самый старший из всех и по возрасту и по стажу. Он работает в этом институте с тех пор, как окончил его. Преподаватели математики и истории его бывшие студенты. Аркадьева старше преподавателя немецкого языка. Кто какой предмет преподает? 

## Принцип решения

Создаётся список ```Result``` с длинной 6, который будет хранить данные о преподавателе. Каждый элемент списка будет хранить в себе данные об имени, поле, месте, где он учился, и предмете, который он преподаёт. Записываются начальные данные с названиями предметов: ```geography, english, french, german, history, maths```. Также эти данные фиксируются, чтобы не выполнялось повторное заполнение списка, так как эти данные могут быть записаны в другом порядке, а это нам не нужно, так как это лишний перебор. Для записи всех фактов в список используется предикат ```member```.

```prolog
solve(Result) :- length(Result, 6),
member(teacher(_, _, _, geography), Result), !,
member(teacher(_, _, _, english), Result), !,
member(teacher(_, _, _, french), Result), !,
member(teacher(_, _, _, german), Result), !,
member(teacher(_, _, _, history), Result), !,
member(teacher(_, _, _, maths), Result), !,
```

Также список заполняется данными об имени и поле человека.

```prolog
member(teacher(arkadieva, female, _, _), Result),
member(teacher(babanova, female, _, _), Result),
member(teacher(korsakova, female, _, _), Result),
member(teacher(dashkov, male, _, _), Result),
member(teacher(ilin, male, _, _), Result),
member(teacher(flerov, male, _, _), Result),
```

Далее записываются все факты, которые написаны в задаче.
Первый факт гласит о том, что преподаватель математики и преподаватель немецкого языка занимались художественной гимнастикой. Марией Александровной была сделана поправка о том, что преподаватели, занимающиеся художественной гимнастикой, являются женщинами. Поэтому записывается факт о том, что преподаватели немецкого и математики являются женщинами.

```prolog
% Преподаватели математики и немецкого занимались гимнастикой, значит, они женщины.
member(teacher(_, female, _, maths), Result),
member(teacher(_, female, _, german), Result),
```

Одним из важных фактов было то, что преподаватель английского старше всех по возрасту и стажу. Поэтому, так как Ильин имеет стаж работы меньше, чем преподаватель географии, то он не является преподавателем английского и географии. Также Флеров не является  преподавателем английского языка, потому что у него стаж работы меньше, чем у Ильина. Поэтому исключаются все случаи, когда Ильин является преподавателем английского, когда Ильин является преподавателем географии и когда Флеров является преподавателем английского.

```prolog
% Ильин не преподаватель английского
not(member(teacher(ilin, _, _, english), Result)),
% Ильин не преподаватель географии
not(member(teacher(ilin, _, _, geography), Result)),
% Флеров не преподаватель английского
not(member(teacher(flerov, _, _, english), Result)),
```
Было сказано, что Флеров является отцом преподавателя по французскому языку. Из этого следует, что Флеров не является преподавателем французского. Выше было сказано, что Ильин старше Флерова, следовательно, он не является преподавателем французского языка. Поэтому исключаются все случаи, когда Флеров является преподавателем французского, и те случаи, когда Ильин является преподавателем французского. Было сказано, что Аркадьева старше преподавателя по немецкому языку. Поэтому она не является преподавателем по немецкому, и исключаются все случаи, когда Аркадьева является преподавателем немецкого.

```prolog
% Флеров не преподаватель французского
not(member(teacher(flerov, _, _, french), Result)),
% Ильин не преподаватель французского
not(member(teacher(ilin, _, _, french), Result)),
% Аркадьева не является преподавателем немецкого, т.к. она старше преподавателя по немецкому
not(member(teacher(arkadieva, _, _, german), Result)),
```

В задаче было сказано, что Аркадьева и Бабанова учились в одном университете. Остальные учились в педагогическом институте. При решении этой задачи, нам не важно, учились они вместе или раздельно. Главное состоит в том, чтобы разделить их на место, где они учились: университет или институт.

```prolog
% Аркадьева и Бабанова учились в университете
member(teacher(arkadieva, female, university, _), Result),
member(teacher(babanova, female, university, _), Result),

% Корсакова, Дашков, Ильин, Флеров учились в институте
member(teacher(korsakova, female, institute, _), Result),
member(teacher(dashkov, male, institute, _), Result),
member(teacher(ilin, male, institute, _), Result),
member(teacher(flerov, male, institute, _), Result),
```

В условии также было утверждение о том, что преподаватель английского преподаёт в институте с того момента, как он его окончил. Также было сказано, что преподаватели по математике и истории были учениками преподавателя по английскому. Из этих двух утверждений следует, что преподаватель английского учился в институте, и, так как он остался в нём преподавать, то преподаватели по математике и истории тоже учились в институте.

```prolog
% Преподаватель английского учился в институте
member(teacher(_, _, institute, english),Result),

% Преподаватели математики и истории - бывшие ученики преподавателя английского
% Значит, они учились в институте, т.к. преподаватель английского преподавал в институте, после его окончания 
member(teacher(_, _, institute, maths), Result),
member(teacher(_, _, institute, history), Result).
```

Предикат solution выполняет solve(Result) и выводит всех преподавателей с их предметами. 

```prolog
solution :- solve(Result), !,
member(teacher(arkadieva, _, _, A), Result),
write('Arkadieva = '), write(A), nl,

member(teacher(babanova, _, _, B), Result),
write('Babanova = '), write(B), nl,

member(teacher(korsakova, _, _, K), Result),
write('Korsakova = '), write(K), nl,

member(teacher(dashkov, _, _, D), Result),
write('Dashkov = '), write(D), nl,

member(teacher(ilin, _, _, I), Result),
write('Ilin = '), write(I), nl,

member(teacher(flerov, _, _, F), Result),
write('Flerov = '), write(F), nl.
```

Решение:
```prolog
?- solution.
Arkadieva = french
Babanova = german 
Korsakova = maths 
Dashkov = english 
Ilin = history    
Flerov = geography
true ;
false.
```

## Выводы

Результатом программы будет единственное решение, которое удовлетворяет всем условиям задачи. Моя программа является эффективной, потому что она не проверяет повторяющиеся комбинации. После ввода начальных данных о предметах и именах преподавателей с их полом будет произведено 6! = 720 переборов (что равно количеству перестановок в списке). Также моя программа является безопасной, потому что она не зацикливается, так как все переборы индивидуальны и не повторяются, что не позволяет программе останавливаться на одном месте, и максимальное количество переборов, которое она произведёт, как было сказано, будет 720, среди которых она найдёт единственное решение.

Выполняя лабораторную работу, я научился выделять важные факты из условия задачи и переводить их на язык Пролог. Я узнал как отсекать варианты решений, которые не удовлетворяют условию для увеличения эффективности работы программы. Также я получил навыки построения таких правил, которые не зацикливают программу. Язык Пролог является очень удобным для решения логических задач, потому что на нём можно описать такие условия, которые будут отсекать ненужные решения для упрощения работы программы, и благодаря этому можно более эффективно решать задачу. Когда в задаче много данных, то решить её в уме становится почти невозможно. Пролог помогает решать задачи такого рода. Эта работа заставила меня задуматься о том, как будет работать пролог при очень большом количестве условий и правил, которые описываются не так просто, как в моей задаче. Как правильно написать предикаты для решения таких задач, чтобы решение было эффективным, не зацикливало работу, и выводило правильный ответ? Не будет ли Пролог долго решать даже эффективную программу? 
